/*
 * tps6598x driver
 *
 * Author:      Dan Murphy <dmurphy@ti.com>
 * Copyright (C) 2017 Texas Instruments, Inc.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

#ifndef _PHY_TPS6598X_H
#define _PHY_TPS6598X_H

#define TPS6598X_VID		0x00
#define TPS6598X_DID		0x01
#define TPS6598X_PROTO_VER	0x02
#define TPS6598X_MODE		0x03
#define TPS6598X_TYPE		0x04
#define TPS6598X_UID		0x05
#define TPS6598X_CUSTUSE	0x06

#define TPS6598X_CMD_1		0x08
#define TPS6598X_DATA_1		0x09

#define TPS6598X_VERSION	0x0f
#define TPS6598X_CMD_2		0x10
#define TPS6598X_DATA_2		0x11

#define TPS6598X_INT_EVENT_1	0x14
#define TPS6598X_INT_EVENT_2	0x15
#define TPS6598X_INT_MASK_1	0x16
#define TPS6598X_INT_MASK_2	0x17
#define TPS6598X_INT_CLEAR_1	0x18
#define TPS6598X_INT_CLEAR_2	0x19
#define TPS6598X_STATUS		0x1a

#define TPS6598X_SYS_PWR_ST	0x20
#define TPS6598X_SYS_CFG	0x28
#define TPS6598X_CTRL_CFG	0x29
#define TPS6598X_BOOT_FLAGS	0x2d
#define TPS6598X_BUILD_ID	0x2e
#define TPS6598X_DEV_INFO	0x2f

#define TPS6598X_RX_SRC_CAP	0x30
#define TPS6598X_RX_SNK_CAP	0x31
#define TPS6598X_TX_SRC_CAP	0x32
#define TPS6598X_TX_SNK_CAP	0x33

#define TPS6598X_PDO_CONTRACT	0x34
#define TPS6598X_RDO_CONTRACT	0x35
#define TPS6598X_RDO_SNK_REQ	0x36
#define TPS6598X_SNK_AUTO_NEG	0x37
#define TPS6598X_ALT_MD_SEQ	0x38
#define TPS6598X_PWR_STATUS	0x3f
#define TPS6598X_PD_STATUS	0x40

#define TPS6598X_TX_ID		0x47
#define TPS6598X_RX_ID_SOP_1	0x48
#define TPS6598X_RX_ID_SOP_2	0x49
#define TPS6598X_USR_VID_CFG	0x4a

#define TPS6598X_RX_ATTENTION	0x4e
#define TPS6598X_RX_VDM		0x4f

#define TPS6598X_MAX_READ_BYTES 0x40

#define TPS6598X_DETECT_MASK	(BIT(3) | BIT(2))
#define TPS6598X_REG_CUR_MODE_DETECT_DEFAULT	0x00
#define TPS6598X_REG_CUR_MODE_DETECT_MID	BIT(2)
#define TPS6598X_REG_CUR_MODE_DETECT_HIGH	BIT(3)

/* Register REG_CURRENT_MODE 08 */
#define TPS6598X_REG_CUR_MODE_ADVERTISE_MASK		(BIT(7) | BIT(6))
#define TPS6598X_REG_CUR_MODE_ADVERTISE_DEFAULT		0x00
#define TPS6598X_REG_CUR_MODE_ADVERTISE_MID		BIT(6)
#define TPS6598X_REG_CUR_MODE_ADVERTISE_HIGH		BIT(7)
#define TPS6598X_DETECT_CURR_MASK		(BIT(3) | BIT(2))
#define TPS6598X_REG_CUR_MODE_DETECT_DEFAULT	0x00
#define TPS6598X_REG_CUR_MODE_DETECT_MID	BIT(2)
#define TPS6598X_REG_CUR_MODE_DETECT_HIGH	BIT(3)
#define TPS6598X_REG_CUR_MODE_DETECT_PD		(BIT(3) | BIT(2))

#define TPS6598X_BCSTATUS_DETECT_MASK	BIT(4)
#define TPS6598X_BCSTATUS_VALID		BIT(4)

#define TPS6598X_BCSTATUS_MASK		(BIT(6) | BIT(5))
#define TPS6598X_BCSTATUS_SDP		0x0
#define TPS6598X_BCSTATUS_DCP		(BIT(6) | BIT(5))
#define TPS6598X_BCSTATUS_CDP		BIT(6)

#define TPS6598X_ATTACHED_STATUS	BIT(0)

#define TPS6598X_DATA_ROLE		BIT(6)
#define TPS6598X_REG_STATUS_AS_UFP		0x0
#define TPS6598X_REG_STATUS_AS_DFP		0x40

#define TPS6598X_REG_STATUS_USB_HOST_PRS_MASK (BIT(6) | BIT(7))
#define TPS6598X_REG_STATUS_USB_HOST_PD_NO_USB (BIT(6))

#define TPS6598X_PORTINFO_MASK		0xf8
#define TPS6598X_UFP_ONLY_MODE		0x0
#define TPS6598X_DFP_ONLY_MODE		(BIT(1) | BIT(2))
#define TPS6598X_UFP_DR_PR_SWAP		(BIT(0) | BIT(1))
#define TPS6598X_DUAL_ROLE_MODE		(BIT(0) | BIT(2))

#define TPS6598X_PR_SWAP_MASK		0xf
#define TPS6598X_PROCESS_SNK_MODE	BIT(4)
#define TPS6598X_INIT_SNK_MODE		BIT(5)
#define TPS6598X_PROCESS_SRC_MODE	BIT(6)
#define TPS6598X_INIT_SRC_MODE		BIT(7)

#define TPS6598X_PP_HV_MASK		0xf3
#define TPS6598X_PP_HV_OUTPUT		BIT(2)
#define TPS6598X_PP_HV_INPUT		BIT(3)
#define TPS6598X_PP_HV_INPUT_SYS_RDY	(BIT(2) | BIT(3))

#define TPS6598X_PDO_VOLT_UPPER_MASK	0xf
#define TPS6598X_PDO_VOLT_UPPER_SHIFT	8
#define TPS6598X_PDO_VOLT_LOWER_MASK	0xfc
#define TPS6598X_PDO_VOLT_LOWER_SHIFT	2
#define TPS6598X_PD_VOLT_ADJ		50
#define TPS6598X_PDO_CURR_MASK		0x3ff
#define TPS6598X_PDO_CURR_UPPER_SHIFT	8
#define TPS6598X_PD_CURR_ADJ		10

struct tps6598x_reg_data {
	unsigned int reg_num;
	unsigned int num_of_bytes;
	unsigned int writeable;
};

#endif
